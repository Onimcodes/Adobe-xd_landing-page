(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4780],{67281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return qe}});var r=n(809),o=n.n(r),i=n(26265),a=n(92447),l=n(67294),u=n(37244),s=n.n(u),d=n(19291),c=n(99246),f=n(84054),m=n(65455),p=n(94797),v=n(49644),g=n(90325),S=n(58886),E=n(96029),T=n(61792),b=n(57332),C="SegmentationChallenger__bundleSelector__3O4Tm",O=n(14834),I=n(7655),_=n(56746),y=n(82093),h=n(1025),A=n(23996),N=n(2385),P=n(37629),R=n(52253),U=n(41681),k=n(298),D=n(11426),L=n(62482),w=n(92488),M=n(34937),j=(0,M.defineContents)("SegmentationChallengerPageContentType",{pageTitle:{id:"pageTitle",type:"string",placeholderContent:"{ type, select,\n        DAY {Pick a plan - your first {trialTerm, plural, =1 {day is} other {# days are}} free.}\n        WEEK {Pick a plan - your first {trialTerm, plural, =1 {week is} other {# weeks are}} free.}\n        MONTH {Pick a plan - your first {trialTerm, plural, =1 {month is} other {# months are}} free.}\n        other {Pick a plan.}\n      }"},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},redirectingText:{id:"redirectingText",type:"string",placeholderContent:"Redirecting..."}});function G(e,t){var n,r,o=(null===e||void 0===e||null===(n=e.promotion)||void 0===n?void 0:n.promotionTerm)||"",i=(null===e||void 0===e||null===(r=e.promotion)||void 0===r?void 0:r.promotionTermValue)||0;return t.format(j.pageTitle,{type:o,trialTerm:i})}var V,B,F,x=n(30137),Z=n(8703),q=n(44596),K=n(70721),H=n(80827),Q=n(84248),Y="SegmentationTabs__tabsContainer__3gQG0",W=n(54147),$=n(32292);!function(e){e.COM="COM",e.EDU="EDU",e.GOV="GOV"}(V||(V={})),function(e){e.TEAM="TEAM",e.INDIVIDUAL="INDIVIDUAL",e.ENTERPRISE="ENTERPRISE"}(B||(B={})),function(e){e.DEFAULT="DEFAULT",e.PERPETUAL="PERPETUAL",e.TRIAL="TRIAL",e.BASE="BASE",e.PROMOTION="PROMOTION"}(F||(F={}));var J=(0,M.defineContents)("ImageContentType",{publishUrl:{id:"_publishUrl",type:"string"},authorUrl:{id:"_authorUrl",type:"string"}}),X=(0,M.defineContents)("SegmentationTab",{title:{id:"title",type:"string"},defaultIcon:{id:"defaultIcon",type:J},selectedIcon:{id:"selectedIcon",type:J},marketSegment:{id:"marketSegment",type:"string"},customerSegment:{id:"customerSegment",type:"string"},offerType:{id:"offerType",type:"string"}}),z=(0,M.defineContents)("SegmentationTabs",{pickerLabel:{id:"pickerLabel",type:"string",placeholderContent:"Show me plans for:"},segmentations:{id:"segmentations",type:X,isArray:!0,placeholderContent:[{title:"Individuals",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-selected.svg"},customerSegment:B.INDIVIDUAL,marketSegment:V.COM},{title:"Students and teachers",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-selected.svg"},customerSegment:B.INDIVIDUAL,marketSegment:V.EDU},{title:"Business",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-selected.svg"},customerSegment:B.TEAM,marketSegment:V.COM},{title:"Schools and universities",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-selected.svg"},customerSegment:B.TEAM,marketSegment:V.EDU}]}}),ee=n(11168),te=n(71263),ne=n(17182),re="SegmentationTab__tabContainer__1dnov",oe="SegmentationTab__tabIcon__2tUg2",ie="SegmentationTab__tabLabel__1VAlC",ae=l.createElement,le=function(e){var t=e.id,n=e.isSelected,r=e.label,o=e.defaultIcon,i=e.selectedIcon;return ae("div",{className:re,"data-testid":"segmentation-tab-item-".concat(t)},function(e,t,n){return ae("div",{className:oe},e?n:t)}(n,o,i),ae("span",{className:ie,"data-testid":"segmentation-tab-label"},r))},ue=n(52007),se=n(49865),de=l.createElement;function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e,t){var n=e._publishUrl;return de("img",{src:n,role:"presentation",alt:"","aria-labelledby":t})}var me=(0,se.r)("segmentationTabs",z)((function(e){var t=e.onSelect,n=e.segmentations,r=e.selectedTabId,o=(0,W.VB)(W.yr),a=(0,M.useContentEntry)(z),u=a.get(z.pickerLabel),s=(0,ue.useTrackEvent)(),d=function(e,t){var n=e.get("segmentations");return Array.isArray(n)&&t.map((function(e){var t=e||{},r=t.id,o=t.customerSegment,i=t.marketSegments,a=t.offerType,l=i||[""],u=(0,$.Z)(l,1)[0],s=n.find((function(e){return e.marketSegment===u&&e.customerSegment===o&&(!e.offerType||e.offerType===a)}))||{},d=s.title,c=void 0===d?"":d,f=s.defaultIcon,m=void 0===f?"":f,p=s.selectedIcon;return{id:r,title:c,defaultIcon:m,selectedIcon:void 0===p?"":p,customerSegment:o,marketSegment:u,offerType:a}}))}(a,(0,l.useMemo)((function(){return n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.offer)}))}),[n])),c=function(e){var n=d.find((function(t){return t.id===e})),o=n.customerSegment,i=n.marketSegment;n.id!==r&&f(o,i),t&&t(e)},f=function(e,t){var n;n=e===N.op.Individual?t===N.ii.Com?R.ps.SEGMENTATION_TAB_INDIVIDUAL:R.ps.SEGMENTATION_TAB_STUDENTS_TEACHERS:t===N.ii.Edu?R.ps.SEGMENTATION_TAB_SCHOOL_UNIVERSITY:R.ps.SEGMENTATION_TAB_TEAM;var r="".concat(n,":").concat(R.ps.SEGMENTATION_TAB_CLICK),o="".concat(n).concat(R.ps.SEGMENTATION_TAB),i=(0,k.W6)(r,o);s(i)};return de("div",{className:Y,"data-testid":"segmentation-tabs-container"},o?de(ee.cW,{isQuiet:!0,onSelectionChange:c,selectedKey:r,"data-testid":"segmentation-picker","aria-label":"Show me plans for",label:u},d.map((function(e){var t=e||{},n=t.id,r=t.title;return de(te.ck,{key:n},r)}))):de(ne.mQ,{selectedKey:r,onSelectionChange:c,"data-testid":"segmentation-tabs","aria-label":"Show me plans for"},de(ne.td,null,d.map((function(e){var t=e||{},n=t.id,o=t.title,i=t.defaultIcon,a=t.selectedIcon;return de(te.ck,{key:n},de(le,{id:n,isSelected:r===n,label:o,defaultIcon:fe(i,o),selectedIcon:fe(a,o)}))})))))})),pe=n(36623),ve=n(15257),ge=n(46839),Se=n(69047),Ee=n(11051),Te=n(276),be=n(13164),Ce=n(4190),Oe=n(62452),Ie=n(46829),_e=n(96909),ye=n(5764),he=n(12510),Ae=n(21346),Ne=n(60718),Pe=l.createElement;function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=(0,se.r)("segmentationChallengerPage",j)((function(){var e,t,n,r,o,a,u=(0,M.useContentEntry)(j),d=(0,ye.R_)(),p=d.goToNextStep,v=d.hasPreviousStep,S=(0,Oe.eR)(H.NavigationType.EXTERNAL),b=(0,Oe.nV)(),V=(0,Oe.nV)(U.ki.BUSINESS_TRIAL),B=(0,Te.useDispatch)(),F=(0,he.useStore)().getState(),Y=(0,Te.useSelector)(m.mT),W=(0,Te.useSelector)(m.Im),$=(0,Te.useSelector)(T.H0),J=(0,Te.useSelector)(m.n$),X=(0,Te.useSelector)(T.et).userId,z=(0,Te.useSelector)(E.vl),ee=s().app,te=ee.PA_CODE,ne=ee.OFFER_TYPE,re=ee.ORIGINAL_OFFER_ID,oe=ee.CLIENT_ID,ie=ee.SVAR,ae=ee.ITEMS,le=z[te.name],se=z[ne.name],de=z[oe.name],ce=z[ie.name],fe=(0,D.Nk)(),Re=fe.setBundleSourceOffer,ke=fe.setIsBundleOfferSelected,De=(0,Te.useSelector)(D.tT),Le=(0,Te.useSelector)(m.S2),we=(0,_e.W)(),Me=we.showApplePay,je=we.showGooglePay,Ge=(0,l.useState)(!1),Ve=Ge[0],Be=Ge[1],Fe=(0,l.useState)(!1),xe=Fe[0],Ze=Fe[1],qe=(0,l.useState)(!1),Ke=qe[0],He=qe[1],Qe=(0,Ee.useCommerceAppContext)().isInApp,Ye=(0,Te.useSelector)(m.dm),We=Ye.teamAdminConsoleUrl,$e=Ye.teamCCPlansUrl,Je=Ye.teamCCEduPlansUrl,Xe=Ye.teamDocumentPlansUrl,ze=Ye.desktopTrialDownloadUrl,et=(0,Ce.useFeatureFlags)([c.R.UC_M5])[c.R.UC_M5],tt=(0,Ae.z)(),nt=(0,ue.useTrackEvent)(),rt=R.ps.PLAN_PICK_ROUTE,ot=(0,Ce.useFeatureFlags)([c.R.P_UC_USE_TEST_CAMPAIGNS])[c.R.P_UC_USE_TEST_CAMPAIGNS],it=(0,Ie.useQuery)(f.VQ,{variables:(0,f.tH)(Y,le,J,se,X,de,ce,ot)}),at=it.error,lt=it.loading,ut=it.data.segmentationBundleOffers,st=ut.map((function(e){return e.segmentationOffer}))||[],dt=(0,Ce.useFeatureFlags)(c.R.UC_BTS_REDIRECT_UK)[c.R.UC_BTS_REDIRECT_UK];if(dt?!Le&&"GB"!==Y:!Le){for(var ct=JSON.parse(JSON.stringify(st)),ft=0;ft<ct.length;ft++){var mt,pt=null===(mt=ct[ft])||void 0===mt?void 0:mt.offer;if((null===pt||void 0===pt?void 0:pt.offerType)===Q.R.TRIAL&&(null===pt||void 0===pt?void 0:pt.customerSegment)===N.op.Team){ct[ft].offer.promotion.promotionTermValue=7;break}}st=JSON.parse(JSON.stringify(ct))}var vt=(0,g.V$)(z,st),gt=(0,l.useState)(vt),St=gt[0],Et=gt[1],Tt=(0,be.T)(),bt=ut.reduce((function(e,t){var n,r=null===t||void 0===t||null===(n=t.segmentationOffer)||void 0===n?void 0:n.offer;return(null===r||void 0===r?void 0:r.id)===St&&r.customerSegment===N.op.Individual&&r.marketSegments.includes(N.ii.Com)&&0===(e=t.bundleOffers.map((function(e){return e.offer}))).length?[t.segmentationOffer.offer]:e}),[]),Ct=(0,Te.useSelector)(E.yq),Ot=bt.filter((function(e){return e.id===(null===Ct||void 0===Ct?void 0:Ct[0])})).length>0,It=Ot&&null!==(e=null===Ct||void 0===Ct?void 0:Ct[0])&&void 0!==e?e:vt,_t=(0,l.useState)(It),yt=_t[0],ht=_t[1],At=z[ae.name]&&Ot?z:Ue(Ue({},z),{},(0,i.Z)({},ae.name,[{id:vt}])),Nt=(0,l.useState)(At),Pt=Nt[0],Rt=Nt[1],Ut={offers:bt,selectedOfferId:yt};(0,l.useEffect)((function(){var e=(null===Ct||void 0===Ct?void 0:Ct[0])||It;if(!at&&!lt&&Ut.offers.length>0&&!De){var t,n=Ut.offers.find((function(t){return(null===t||void 0===t?void 0:t.id)===e}));Re(e,null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName)}}),[Ut.offers.length,Ct,De,Ut.offers,Re,at,lt,It]);var kt=(0,l.useRef)({isDefaultSegmentSelected:!0}),Dt=(0,l.useRef)({isDefaultSelected:!0});(0,l.useEffect)((function(){if(St){if(kt.current.isDefaultSegmentSelected){Tt(P.P.PAGE_LOAD,{offers:st,selectedOfferId:St});var e=(0,ve.SQ)(st,St,!0),t=e.offer,n=e.selectedPodEvent,r=e.flowTypeAttributes,o=(0,k.Nf)(t,r,F,R.RC.EVENT_STATE_TYPE,n,Le,rt,Me,je);tt(o)}else{Tt(P.P.SEGMENT_SELECTED,{offers:st,selectedOfferId:St});var i=(0,ve.SQ)(st,St,!1),a=i.offer,l=i.selectedPodEvent,u=i.flowTypeAttributes,s=(0,k.Nf)(a,u,F,R.RC.EVENT_LINK_TYPE,l,Le,rt);tt(s)}kt.current.isDefaultSegmentSelected=!1}}),[St]);var Lt=null===bt||void 0===bt?void 0:bt.reduce((function(e,t,n){var r,o,a=null===t||void 0===t?void 0:t.offerContent,l=null===a||void 0===a?void 0:a.productName,u=n+1;return{content:Ue(Ue({},e.content),{},(0,i.Z)({},u,a)),productArrangementCodes:Ue(Ue({},e.productArrangementCodes),{},(0,i.Z)({},u,t.productArrangementCode)),productLogoUrls:Ue(Ue({},e.productLogoUrls),{},(0,i.Z)({},u,null===(r=a.productIconUrls)||void 0===r?void 0:r[0])),descriptionVariables:Ue(Ue({},e.descriptionVariables),{},(o={},(0,i.Z)(o,"product".concat(n+1),l),(0,i.Z)(o,"totalNumberOfBundleOffers",u),o))}}),{}),wt=(0,M.useContentEntry)(void 0,!0);!function(){if((0,q.$D)(bt)){var e=wt.get("bundleContentList"),t=wt.get("bestValueList");if(t&&e){var n=e.items[0].bestValue,r=t.items[0];n.label=r.label,n.variant=r.variant}}}();var Mt=null===bt||void 0===bt||null===(t=bt[0])||void 0===t||null===(n=t.productArrangement)||void 0===n?void 0:n.cloud,jt=Q.R[null===bt||void 0===bt||null===(r=bt[0])||void 0===r?void 0:r.offerType],Gt=null===bt||void 0===bt?void 0:bt.find((function(e){return(null===e||void 0===e?void 0:e.id)===yt})),Vt=null===Gt||void 0===Gt?void 0:Gt.productArrangementCode,Bt=null===Gt||void 0===Gt||null===(o=Gt.offerContent)||void 0===o||null===(a=o.productIconUrls)||void 0===a?void 0:a[0];function Ft(e){var t=z[s().app.ITEMS.name],n=Object.assign({},null===t||void 0===t?void 0:t[0]);n&&(n.id=e);var r=Ue(Ue({},z),{},(0,i.Z)({},s().app.ITEMS.name,[n]));ht(e),Rt(r),function(e){var t=(0,ve.xy)(Ut.offers,e,Dt.current.isDefaultSelected),n=t.offer,r=t.selectedPodEvent,o=t.flowTypeAttributes,i=(0,k.Nf)(n,o,F,Dt.current.isDefaultSelected?R.RC.EVENT_STATE_TYPE:R.RC.EVENT_LINK_TYPE,r,void 0,rt,Me,je);tt(i),Dt.current.isDefaultSelected=!1}(e)}function xt(e){return st.find((function(t){return(null===t||void 0===t?void 0:t.offer.id)===e}))}function Zt(){var e;qt()&&(Pt[re.name]=null===(e=Kt(N.op.Individual,N.ii.Com))||void 0===e?void 0:e.id);ke(De!==yt);var t=(0,k.W6)("".concat(R.ps.PLAN_PICK_ROUTE,":").concat(R.ps.CONTINUE,":").concat(R.ps.CLICK),R.ps.CONTINUE);nt(t),p(Pt)}(0,l.useEffect)((function(){xe&&Zt(),Ze(!1)}),[xe]);var qt=function(){var e=Kt(N.op.Individual,N.ii.Com),t=Kt(N.op.Individual,N.ii.Edu);return e&&t&&e.productArrangement.family!==t.productArrangement.family&&t.id===yt},Kt=function(e,t){var n;return null===(n=st.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};return Pe(l.Fragment,null,Ke?Pe(x.b,{workflow:$?Z.q.TEAM_ADMIN:Z.q.BUSINESS_TRIAL}):Pe(Ne.Ru,null,Pe(Ne.uN,null,Pe(_.AppErrorBoundary,{logMeta:{componentName:"Bundle",errorLoadingComponent:"StepHeader"}},Pe(ge.l,{title:G(Gt,u)})),Pe(me,{onSelect:function(e){var t,n;Et(e),ht(e),B((0,pe.$C)(e));var r=null!==(t=null===(n=xt(e))||void 0===n?void 0:n.offer)&&void 0!==t?t:{},o=r.customerSegment,i=r.marketSegments,a=r.offerType;o===N.op.Individual&&i.includes(N.ii.Edu)&&(Ft(e),Ze(!0)),o===N.op.Team&&(Be(!0),setTimeout((function(){ht(It),Et(vt),Be(!1)}),10),setTimeout((function(){!function(e,t){if($)Qe()?(He(!0),b((0,L.AK)(We))):S(We);else if(e===Q.R.TRIAL)if(et||Le||dt&&"GB"===Y){var n=(0,L.dy)(t,Y,J);Qe()?(He(!0),V(n)):S(n)}else{var r=(0,w.getLocalizedURL)(ze,W);S(r)}else{var o,i,a,l,u=(null===(o=xt(t))||void 0===o?void 0:o.offer)||{};a=(null===(i=u.productArrangement)||void 0===i?void 0:i.cloud)===A.e.DOCUMENT?Xe:null!==(l=u.marketSegments)&&void 0!==l&&l.includes(N.ii.Com)?$e:Je,Qe()?(He(!0),b((0,L.AK)(a))):S(a)}}(a,e)}),15))},code:le,segmentations:st,selectedTabId:St}),bt.length>0?Pe("div",{className:C},Lt&&Pe(y.$G,{bundleDescriptionVariables:Lt.descriptionVariables,locale:J,offerContents:Lt.content,productArrangementCodes:Lt.productArrangementCodes,productLogoUrls:Lt.productLogoUrls}),Gt&&Pe(Se.o,{offer:Gt}),Pe(y.O0,{onSelectionChange:Ft,bundleData:Ut})):Ve&&Pe(K.a,{message:u.get(j.redirectingText),showRedirect:!0}),bt.length>0&&Pe(O.s,{ctaLabel:u.get(j.buttonContinue),onCtaClick:Zt,showBackButton:v()})),Pe(Ne.Wh,null,Pe(_.AppErrorBoundary,{logMeta:{componentName:"SegmentationChallenger",errorLoadingComponent:"AllPlansInclude"}},Pe(I.R,{cloud:Mt,offerType:jt,offerContent:null===Gt||void 0===Gt?void 0:Gt.offerContent,productArrangementCode:Vt,productLogoUrl:Bt})),Pe(_.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"ClarityTerms"}},Pe(h.J,{offer:Gt})))))})),De=ke.queryCollection;De.merge(I.R.queryCollection),De.merge(y.$G.queryCollection),De.merge(Se.o.queryCollection),De.merge(y.sH.queryCollection),De.merge(h.J.queryCollection),De.merge(me.queryCollection);var Le=n(72301),we=n(46576),Me=n(40102),je=l.createElement;function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(){var e=(0,he.useStore)(),t=(0,Ce.useFeatureFlags)([c.R.UC_FORCE_SEGMENTATION_CHALLENGER]),n=e.getShouldRenderSegmentationChallenger(t);return(0,we.Vk)(),je(n?ke:f.vI,null)},Fe=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,C,O,I,_,y,h,A,N,P,R,U,k,D,L,w,M,j,G,V,B,F;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C=t.apolloClient,O=t.features,I=t.res,_=t.store,y=t.logger,h=_.getState(),A=(0,m.mT)(h),N=(0,m.n$)(h),P=(0,E.vl)(h)[s().app.PA_CODE.name],R=(0,E.vl)(h)[s().app.OFFER_TYPE.name],U=null===(n=(0,T.et)(h))||void 0===n?void 0:n.userId,k=(0,E.vl)(h)[s().app.CLIENT_ID.name],D=(0,E.vl)(h)[s().app.SVAR.name],null===I||void 0===I||!I.writableEnded){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,(0,S.C)(h,t.logger);case 13:return L=e.sent,(0,d._H)(L,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=17,C.query({query:f.VQ,variables:(0,f.tH)(A,P,N,R,U,k,D,null===O||void 0===O?void 0:O.includes(c.R.P_UC_USE_TEST_CAMPAIGNS)),context:Ve({},L)});case 17:if(w=e.sent,h=_.getState(),null===w||void 0===w||!w.errors){e.next=24;break}if(M={currentRoute:b.Z.SEGMENTATION},!(j=(0,p.S2)(w.errors,C,_,M))){e.next=24;break}return e.abrupt("return",{error:j});case 24:if(null!==(G=null===w||void 0===w||null===(l=w.data)||void 0===l?void 0:l.segmentationBundleOffers)&&void 0!==G&&G.length){e.next=27;break}throw(0,v.n)();case 27:return y.info((0,g.qj)(G),"Segmentation Bundle Offers Response"),V=(0,g.IG)(null===(u=G[0].segmentationOffer)||void 0===u?void 0:u.offer),_.dispatch((0,pe.fC)(V)),B=G[0].id,F=Ve(Ve({},(0,E.vl)(h)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:B}])),(0,ye.OK)(t,b.Z.SEGMENTATION,{features:O,newQueryParams:F}),e.abrupt("return",{segmentationOfferId:B});case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function xe(e,t){e.info((0,g.W1)(t),"Segmentation Offers Response")}Be.getInitialProps=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,p,g,C,O,I,_,y,h,A,N,P,R,U,k,D,L,w,M,j,G,V,B;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I=t.apolloClient,_=t.features,y=t.res,h=t.store,A=t.logger,!h.getShouldRenderSegmentationChallenger((0,i.Z)({},c.R.UC_FORCE_SEGMENTATION_CHALLENGER,null===_||void 0===_?void 0:_.includes(c.R.UC_FORCE_SEGMENTATION_CHALLENGER)))){e.next=4;break}return e.abrupt("return",Fe(t));case 4:return N=h.getState(),P=(0,m.mT)(N),R=(0,m.n$)(N),U=(0,E.vl)(N)[s().app.PA_CODE.name],k=(0,E.vl)(N)[s().app.OFFER_TYPE.name],D=null===(n=(0,T.et)(N))||void 0===n?void 0:n.userId,L=(0,E.vl)(N)[s().app.CLIENT_ID.name],w=(0,E.vl)(N)[s().app.SVAR.name],e.next=14,(0,S.C)(N,t.logger);case 14:if(M=e.sent,null===y||void 0===y||!y.writableEnded){e.next=17;break}return e.abrupt("return");case 17:return(0,d._H)(M,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=20,I.query({query:f.j_,variables:(0,f.WC)(P,U,R,k,D,L,w,null===_||void 0===_?void 0:_.includes(c.R.P_UC_USE_TEST_CAMPAIGNS)),context:Ve({},M)});case 20:if(j=e.sent,N=h.getState(),null!==(G=null===j||void 0===j||null===(l=j.data)||void 0===l||null===(u=l.segmentationOffers)||void 0===u||null===(p=u.result[0])||void 0===p?void 0:p.offers)&&void 0!==G&&G.length){e.next=25;break}throw(0,v.n)();case 25:return xe(A,null===j||void 0===j||null===(g=j.data)||void 0===g?void 0:g.segmentationOffers),V=null===(C=G[0])||void 0===C||null===(O=C.offer)||void 0===O?void 0:O.id,B=Ve(Ve({},(0,E.vl)(N)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:V}])),(0,ye.OK)(t,b.Z.SEGMENTATION,{features:_,newQueryParams:B}),e.abrupt("return",{segmentationOfferId:V});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ze=Le.G.queryCollection;Ze.merge(ke.queryCollection);var qe=(0,Me.O)(Ze,b.Z.SEGMENTATION)(Be)},17775:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/segmentation",function(){return n(67281)}])}},function(e){e.O(0,[9774,7949,9022,532,5582,809,1583,3433,8994,8880,7929,615,1586,2101,8726,2232,8285,2328,4088,6168,898,9174,5110,3728,5454,993,2482,3044,8371,5835,4054,5583],(function(){return t=17775,e(e.s=t);var t}));var t=e.O();_N_E=t}]);